---
title: 为什么要买台云服务器？
tags: [vps,"服务器","云主机"]
categories: '瞎折腾的日常'
mathjax: false
date: 2021-01-18 16:42:14
---

# 写在前面

还就那个又好久没写博客啦！今天把自己的折腾服务器的一些有趣的玩法记录下来，我们到底为啥需要一台云服务器？这篇文章我会聊聊**自己用服务器都干了些啥**，以及我们平时用服务器可以做什么。

<!-- more -->

# 云主机和个人电脑的区别

其实就操作系统的用户接口(界面)这一角度而言，服务器和个人电脑并没有区别，本质上都是**人**操作**系统**去完成一系列**事物**。当然，从很多比较直观的角度来看，他们的区别还是挺大的：

- 云主机往往没有界面(其实windows server是有界面的，但是2021了不会真的有人用windows server吧？)
- 云主机有**公网ip**(当然也可以没有)，其网络质量往往比较稳定(仅指在国内)
- 云主机性能可以根据需求(和钞能力)调节
- 云主机主要使用`linux`操作系统，通过其强大的`shell`来交互

# 我拿云主机都干了啥

因为`IPv4`短缺，而`IPv6`的设计又不向下兼容(真的蠢，[附上一个我觉得不错的知乎回答](https://www.zhihu.com/question/24135053/answer/1008440001))，所以**公网IP**地址可以认为是云服务器(云主机)**最核心**的需求，有了**公网IP**，世界上任何一个接入了互联网的设备就可以直接访问你，并获取你提供的各类服务。可能有人好奇为什么自己的电脑没有公网IP，但`baidu.com`却还是可以把数据发到你的浏览器上，可以去了解下`NAT`技术[^NAT是什么]。

[^NAT是什么]: NAT(Network Address Translation，网络地址转换)，简单来说就是把IP地址映射到端口来方便数据的传输，通常由运营商提供服务。说通俗点就是：本来根据`ip协议`，不管是发数据还是接数据，双方本应该都需要`IP地址`的。前面不是说到`IPv4`地址不够用了嘛，那怎么办呢？运营商就搞出了"共享IP"这个套路，由运营商在你的接入端搞个转换服务。运营商是有`公网IP`的，那我们这片小区的就都共用这一个IP地址吧！`NAT`就会你的`内网IP`地址(比如`10.248.201.200`)映射到他`公网IP`(比如`47.103.23.43`)的某一端口`52301`上，当你访问`baidu.com`的时候，在互联网上这次连接就是`47.103.23.43:52301`➡️`220.181.38.148:443`(百度的ip)。所以你所有的数据都由这个`NAT`服务进行一次转发，再由`NAT`返回。

在互联网上，服务的提供方是少数，而需要服务的却是多数，这是一个显著的**多对一**结构，显然这里只有**一**需要被找到，而**多**不需要被找到。在`IPv4`有限的情况下，运营商将`公网IP`分配给少数，而大多数通过`NAT`来访问互联网，问题解决。

而当你需要被**找到**的时候(比如搭建个人博客什么的)，`NAT`就成了问题，因为没有`公网IP`，你无法直接被找到。你也不可能在不借助外力的情况下通过`NAT`被找到[^为什么呢？]。

[^为什么呢？]: 因为NAT往往被分配了数个`公网IP`地址以及几万个端口号来动态响应一个局部地区的大量请求，这是个动态的过程，所以无法被找到，除非你能固定住某一个**IP**和**端口**的搭配一直为你所用。

我认为云主机的最重要的资源就在于稳定的网络与可以被找到(公网IP)这一属性。下面是我拿它都做了什么。

## 个人博客

**[coreja.com](coreja.com)**

你能看到这篇文章当然是因为它在公网上，而且是在我的服务器上，它是由[hexo](https://github.com/hexojs/hexo)生成的静态页面，在配置好各种设置后就可以一键由`markdown`转换成模版中的样式和效果。未来我打算切换成`gatsby`但目前可能尚无时间。

## 私人云盘

**[cloud.coreja.com](cloud.coreja.com)**

基于[nextcloud](https://github.com/nextcloud/server)的开源项目搭建，非常成熟，有相当多的功能，由于其跨平台特效以及活跃的社区，选用。

我用它的主要需求是使用了`rime`输入法。我从2010年开始在网上打字，一直使用某输入法，积累了一定量的个人词库，但是使用`linux`发现`rime`输入法这个宝藏，再考虑到输入法的个人隐私问题，就一口气连着词库迁移到了`rime`。

`rime`的跨平台特性能让我无论是在`windows`平台上的游戏里交(pen)流(ren)，还是在`linux`平台工作时的交(mo)流(yu)，我输入的词语**都可以记录**到`rime`的词库中，而`nextcloud`作为跨平台的云盘，可以**无感知**的帮我同步各个平台的词库(甚至包括手机端的rime输入法)。简单来说就是，我在上班打的词语，下班了还可以接着用，无缝对接，终身都能积累自己的词库。

私人云盘的最大好处就是随时随地同步自己的数据，以及完全不用担心隐私问题，毕竟是自己搭建的云盘。除了rime，我还同步了许多配置文件(这也算异地容灾了吧🤣？)

```
提供一个test账户给大家测试用，不要干坏事求求了
帐号：test
密码：test,./123
```

## 内网穿透

基于[nps](https://github.com/ehang-io/nps)搭建的内网穿透神器，让你的本地程序直接映射到公网的端口上，开发人员使用的神兵利器，需要本地端和服务端均安装客户端使用。

## 一些其他的用法

### 饥荒服务器

我也没想到最一开始入云服务器以及`linux`的坑竟然是一款游戏，当时的需求很简单，和小伙伴联机玩饥荒的问题在于，时间长了网络会不稳定(毕竟是`p2p`模式，当时小伙伴们的网络状况肯定是不如云主机的网络稳定的)。我青涩的像个孩子一般，在腾讯云的windows server 2012上用别人写好的脚本摸索着运行`steamcmd`，从下载服务端程序到配置房间，一步一步磕磕碰碰，想起来也是贼有意思。后来发现windows server跑着GUI太占内存了，而自己又菜，还不敢就入手`linux`，于是让小伙伴掏钱买了另一台云服务器，一台跑地上，一台跑地下。(好家伙，`linux`都没碰着，先学着搞分布式了？)

后来入`linux`还是从饥荒开始，对饥荒的程序配置比较熟悉之后，居然很流畅的就在linux上搞定了服务器。

### 抢课

这个其实不用服务器也是ok的，发抢课的请求不管是服务器还是本地电脑都一样，只不过可能觉得服务器的网络稳定一些，所以把代码写好之后丢服务器上跑了。

### 各种后端的开发及运行

有服务器最爽的事情应该是项目代码的验收吧，当别人的课设只能自己掏电脑上去打`localhost`(还往往是`8080`端口)的时候，我直接用学校的电脑反手一个`xxx.coreja.com`，还是睾贵的`HTTPS`请求🔒，哇感觉就贼棒哈哈哈。然后吹实验报告的时候就可以很装13的说自己的项目放在了公网上，大家都可以来体验。

# 小结

其实我写的比较片面，主要是我自己的使用体验。从上面这些讨论不难发现，因为云主机的核心是稳定的网络以及**公网IP地址**，所以云主机的大多数作用都是面向**一对多**的那个**多**，它主要是对外，向外提供服务，不管是游戏的服务器还是自己的博客网站，甚至是自己写的web后端，它一定是向外提供服务给其他人去使用的。

在大学生涯的学习中，我一直坚信一个观点，即有需求才有动力去学习。😶其实从我大二开始接触服务器，接触`linux`，这里面真的踩了不少坑，但也学到了不少知识，这些知识不像是课本里的知识，它们是我主动吮吸、贪婪的从互联网以及各类资料中探索得来的，就我个人体验来说，要比课本里学到的知识深刻的多。从最一开始就直接把`tomcat`放在80端口裸奔，到学会了`nginx`的使用、`acme.sh`颁发泛域名`ssl`，到自己开发后端解决那些看似怪里怪气的`bug`，我增加了不少奇怪的知识。

你要问我这东西有什么用，能干嘛，实话实说我真不知道。老实说，一开始搞这些花里胡哨的其实就是为了装13，为了和别人**不一样**，没有什么特别的正经的目的，我就是觉得这样很酷而已。过程里遇到了配置文件写错了标点或者拼写错误，我也很生气骂自己/别人的教程傻逼，过程里遇到过别人没遇到过的问题也会自己搜文档，实在不行去`github`提issue，比较意外的是大家真的都挺nice，但我在这个过程中不断探索、学习、成长、挑战，克服一个个问题和困难，至少我觉得很值。